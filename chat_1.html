<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>AI í´ë” ì„¤ì • ëŒ€í™”</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <!-- Google Font -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">

  <style>
    :root {
      --bg: #f4f5ff;
      --sidebar-bg: #ffffff;
      --card-bg: #ffffff;
      --primary: #4b6fff;
      --primary-soft: #eef1ff;
      --accent: #ff9f43;
      --text-main: #1f2544;
      --text-muted: #a1a7c5;
      --border-soft: #e3e6ff;
      --danger: #ff5b5b;
      --success: #32c48d;
      --shadow-soft: 0 14px 40px rgba(15, 29, 76, 0.08);
      --radius-lg: 26px;
      --radius-md: 18px;
      --radius-sm: 12px;
    }

    html, body {
      height: 100%;
      margin: 0;
      overflow: hidden;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: "Poppins", system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
      background: #f4f5ff;
      color: var(--text-main);
    }

    .nav-link {
      text-decoration: none;
      color: inherit;
      display: block;
    }

    /* ì „ì²´ ìº”ë²„ìŠ¤ */
    #app-root {
      width: 1440px;
      height: 900px;
      position: absolute;
      left: 50%;
      top: 50%;
      transform-origin: top left;
      overflow: hidden;
    }

    .app {
      position: absolute;
      top: 24px;
      left: 24px;
      right: 24px;
      bottom: 24px;
      padding: 12px;
    }

    /* SIDEBAR */
    .sidebar {
      width: 230px;
      background: var(--sidebar-bg);
      border-radius: var(--radius-lg);
      padding: 28px 22px 22px;
      box-shadow: var(--shadow-soft);
      position: absolute;
      top: 24px;
      bottom: 24px;
      left: 24px;
      display: flex;
      flex-direction: column;
      z-index: 20;  
    }

    .sidebar-main { }

    .brand {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 30px;
    }

    .brand-logo {
      width: 32px;
      height: 32px;
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #fff;
      background: #4b6fff;
      font-weight: 700;
      font-size: 18px;
    }

    .brand-name {
      font-weight: 600;
      font-size: 18px;
    }

    .nav-section-title {
      font-size: 11px;
      text-transform: uppercase;
      color: var(--text-muted);
      letter-spacing: 0.08em;
      margin-bottom: 8px;
    }

    .nav-list {
      list-style: none;
    }

    .nav-item {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 10px 12px;
      border-radius: 12px;
      color: var(--text-muted);
      font-size: 13px;
      cursor: pointer;
      margin-bottom: 4px;
      transition: background 0.2s ease, color 0.2s ease;
    }

    .nav-item .nav-icon {
      width: 24px;
      height: 24px;
      border-radius: 8px;
      background: #f3f5ff;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 13px;
    }

    .nav-item.active {
      background: var(--primary-soft);
      color: var(--primary);
      font-weight: 500;
    }

    .nav-item.active .nav-icon {
      background: var(--primary);
      color: #fff;
    }

    /* --- ì„ íƒí•œ ê´€ì  ì¹´ë“œ (ë¡œê·¸ì•„ì›ƒ ë°”ë¡œ ìœ„) --- */
    .sidebar-basket {
      margin-top: 160px;
      margin-bottom: 12px;
      padding: 12px 12px 10px;
      border-radius: 16px;
      background: #edf3ff;
      border: solid 2px #e8efff;
      transition: border-color 0.15s ease, background 0.15s ease;
    }

    /* ë“œë˜ê·¸ íƒ€ê²Ÿ í•˜ì´ë¼ì´íŠ¸ */
    .sidebar-basket.drag-target {
      border-color: #4b6fff;
      background: #e2e7ff;
    }

    .sidebar-basket-title {
      font-size: 14px;
      font-weight: 600;
      color: #6b6f92;
      letter-spacing: 0.06em;
      text-transform: uppercase;
      margin-bottom: 6px;
    }

    .basket-slot {
      height: 48px;
      border-radius: 8px;
      border: 1px dashed #bac4ff;
      margin-top: 8px;
      background: transparent;
    }

    .basket-slot.filled {
      border-style: solid;
      border-color: #e0e3ff;
      background: #ffffff;
      display: flex;
      align-items: center;
      gap: 6px;
      padding: 0 10px;
    }

    .basket-dot {
      width: 8px;
      height: 8px;
      border-radius: 999px;
      background: #4b6fff;
      flex-shrink: 0;
    }

    .basket-slot.filled span {
      font-size: 11px;
      color: #232744;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .nav-footer {
      margin-top: auto;
    }

    .logout {
      display: flex;
      align-items: center;
      gap: 10px;
      color: var(--text-muted);
      font-size: 13px;
      cursor: pointer;
    }

    /* MAIN CONTENT : ì±„íŒ… + ì˜¤ë¥¸ìª½ íŒ¨ë„ ë ˆì´ì•„ì›ƒ */
    .content-wrapper {
      margin-left: 260px;
      height: 100%;
      display: flex;
      overflow: hidden;
    }

    /* ì±„íŒ… ì˜ì—­ */
    .chat-layout {
      flex: 1;
      border-radius: var(--radius-lg);
      height: 100%;
      display: flex;
      flex-direction: column;
      padding: 28px 28px 22px 28px;
      overflow: hidden;
    }

    .chat-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 8px;
    }

    .chat-title {
      font-size: 22px;
      font-weight: 700;
    }

    .chat-subtitle {
      font-size: 13px;
      color: var(--text-muted);
      margin-top: 4px;
    }

    /* ì¹© */
    .chip-row {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-top: 10px;
    }

    .chip {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 6px 16px;
      border-radius: 999px;
      background: #dde2ff;
      font-size: 12px;
      color: #323a85;
      letter-spacing: 0.02em;
    }

    .chip-label {
      font-weight: 600;
      text-decoration: none;
    }

    .chip-close {
      margin-left: 6px;
      font-size: 14px;
      line-height: 1;
      border: none;
      background: transparent;
      cursor: pointer;
      color: #111;
    }

    .chip-add {
      background: #eef1ff;
      cursor: pointer;
      font-weight: 500;
    }

    .chat-window {
      flex: 1;
      margin-top: 18px;
      margin-bottom: 16px;
      padding-right: 10px;
      background: transparent;
      border-radius: 0;
      overflow-y: auto;
      scrollbar-width: thin;
      scrollbar-color: #b8c0ff transparent;
    }

    .chat-window::-webkit-scrollbar {
      width: 8px;
    }
    .chat-window::-webkit-scrollbar-track {
      background: transparent;
    }
    .chat-window::-webkit-scrollbar-thumb {
      background: #d9ddff;
      border-radius: 999px;
    }
    .chat-window::-webkit-scrollbar-thumb:hover {
      background: #d7dbff;
    }

    .chat-message {
      width: 100%;
      margin-bottom: 14px;
      display: flex;
      align-items: flex-start;
    }

    .chat-message.bot {
      justify-content: flex-start;
    }

    .chat-message.user {
      justify-content: flex-end;
    }

    .chat-bubble {
      max-width: 70%;
      padding: 12px 16px;
      border-radius: 18px;
      font-size: 14px;
      line-height: 1.7;
      white-space: pre-line;
    }

    .chat-message.bot .chat-bubble {
      background: transparent;
      padding: 0;
      border-radius: 0;
      color: #353b5c;
    }

    .chat-message.user .chat-bubble {
      background: #d5d8e8;
      color: #22263f;
      border-bottom-right-radius: 4px;
    }

    .bot-profile {
      width: 36px;
      height: 36px;
      border-radius: 999px;
      background: #ddd;
      overflow: hidden;
      flex-shrink: 0;
      margin-right: 10px;
    }

    .bot-profile img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
    }

    /* ì…ë ¥ ì˜ì—­ */
    .chat-input-bar {
      display: flex;
      flex-direction: column;
      gap: 8px;
      padding: 10px 14px;
      background: #ffffff;
      border-radius: 18px;
    }

    .chat-input-top {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .chat-input {
      border: none;
      outline: none;
      flex: 1;
      font-size: 14px;
      color: #333;
    }
    .chat-input::placeholder {
      color: #b5b8cc;
    }

    .send-btn {
      width: 32px;
      height: 32px;
      border-radius: 999px;
      border: none;
      background: #111;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      font-size: 16px;
      color: #fff;
    }

    .chat-tools-row {
      display: flex;
      gap: 10px;
      margin-top: 2px;
    }

    .chat-tool-btn {
      border: none;
      background: transparent;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 4px 8px;
      font-size: 12px;
      color: #444;
      cursor: pointer;
    }

    .chat-tool-dot {
      width: 24px;
      height: 24px;
      border-radius: 999px;
      background: #e0e0e0;
      flex-shrink: 0;
    }

    /* ì˜¤ë¥¸ìª½ íŒ¨ë„ */
    .prompt-side-panel {
      flex-shrink: 0;
      width: 0;
      overflow: visible;
      background: #ffffff;
      border-radius: 24px;
      box-shadow: 0px 0 30px rgba(146, 154, 177, 0.12);
      padding: 0;
      display: flex;
      flex-direction: column;
      transition: width 0.12s ease, padding 0.12s ease;
      z-index: 1;
    }

    .prompt-side-panel.is-open {
      width: 360px;
      padding: 24px 22px 22px;
    }

    .prompt-panel-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 14px;
    }

    .prompt-panel-title {
      font-size: 18px;
      font-weight: 700;
    }

    .prompt-panel-close {
      border: none;
      background: transparent;
      font-size: 18px;
      cursor: pointer;
    }

    .prompt-panel-tabs {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 10px;
    }

    .prompt-tabs {
      display: flex;
      gap: 18px;
      font-size: 13px;
    }

    .prompt-tab {
      position: relative;
      border: none;
      background: transparent;
      cursor: pointer;
      padding: 4px 0;
      color: #9ba0b9;
      font-size: 13px;
    }

    .prompt-tab.active {
      color: #111827;
      font-weight: 600;
    }

    .prompt-tab.active::after {
      content: "";
      position: absolute;
      left: 0;
      bottom: -6px;
      width: 100%;
      height: 2px;
      border-radius: 999px;
      background: var(--primary);
    }

    .prompt-tab-badge {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 2px 6px;
      margin-left: 4px;
      font-size: 10px;
      border-radius: 999px;
      background: #f1f2ff;
      color: #7b80a4;
    }

    .prompt-search-bar {
      margin-top: 6px;
      margin-bottom: 12px;
      width: 100%;
      border-radius: 999px;
      background: #f5f5f7;
      padding: 8px 14px;
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 13px;
      color: #9ca3af;
    }

    .prompt-search-bar input {
      border: none;
      outline: none;
      background: transparent;
      flex: 1;
      font-size: 13px;
      color: #4b5563;
    }

    .prompt-search-bar input::placeholder {
      color: #b5b8cc;
    }

    .prompt-list-vertical {
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: 8px;
      overflow-y: auto;
      padding-right: 4px;
    }

    .prompt-list-vertical::-webkit-scrollbar {
      width: 6px;
    }
    .prompt-list-vertical::-webkit-scrollbar-thumb {
      background: #e1e4ff;
      border-radius: 999px;
    }

    .prompt-vertical-item {
      background: #ffffff;
      border-radius: 14px;
      padding: 8px 10px;
      display: grid;
      grid-template-columns: auto 1fr auto;
      align-items: center;
      gap: 8px;
      border: solid 2px #f5f5f5;
      font-size: 13px;
      cursor: grab;            /* ë“œë˜ê·¸ ëŠë‚Œ */
    }

    .prompt-vertical-item.dragging {
      opacity: 0.6;
    }

    .prompt-vertical-thumb {
      width: 34px;
      height: 34px;
      border-radius: 999px;
      overflow: hidden;
      background: #d1d5db;
    }

    .prompt-vertical-text {
      display: flex;
      flex-direction: column;
      gap: 3px;
      min-width: 0;
    }

    .prompt-vertical-title {
      font-size: 13px;
      font-weight: 600;
      color: #111827;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .prompt-vertical-subtitle {
      font-size: 11px;
      color: #9ca3af;
    }

    .prompt-add-btn {
      width: 26px;
      height: 26px;
      border-radius: 999px;
      border: none;
      background: #f4f5ff;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      font-size: 16px;
      color: #4b5563;
    }

    .prompt-add-btn:disabled {
      cursor: default;
      background: #111827;
      color: #ffffff;
    }
  </style>
</head>
<body>

<div id="app-root">
  <!-- ì‚¬ì´ë“œë°” -->
  <aside class="sidebar">
    <div class="sidebar-main">
      <div class="brand">
        <div class="brand-logo"></div>
        <div class="brand-name">ë¡œê³ </div>
      </div>

      <div class="nav-section">
        <div class="nav-section-title">ë©”ë‰´</div>
        <ul class="nav-list">
          <a href="index.html" class="nav-link">
            <li class="nav-item">
              <div class="nav-icon">ğŸ“‹</div>
              <span>Home</span>
            </li>
          </a>
          <a href="project_folder.html" class="nav-link">
          <li class="nav-item active">
            <div class="nav-icon">ğŸ“‚</div>
            <span>í”„ë¡œì íŠ¸ ê´€ë¦¬</span>
          </li>
          </a>
          <a href="prompt_list.html" class="nav-link">
          <li class="nav-item">
            <div class="nav-icon">ğŸ›’</div>
            <span>í”„ë¡¬í”„íŠ¸ ë§ˆì¼“</span>
          </li>
        </a>
        <a href="fast_search.html" class="nav-link">
          <li class="nav-item">
            <div class="nav-icon">ğŸ’¬</div>
            <span>ë¹ ë¥¸ ëŒ€í™”</span>
          </li>
        </a>
          <li class="nav-item">
            <div class="nav-icon">âš™ï¸</div>
            <span>ê°œì¸ ì„¤ì •</span>
          </li>
        </ul>
      </div>
    </div>

    <!-- ì„ íƒí•œ ê´€ì  ìŠ¬ë¡¯ -->
    <div class="sidebar-basket" id="sidebarBasket">
      <div class="sidebar-basket-title">ì„ íƒí•œ ê´€ì </div>
      <div class="basket-slot"></div>
      <div class="basket-slot"></div>
      <div class="basket-slot"></div>
      <div class="basket-slot"></div>
    </div>

    <div class="nav-footer">
      <div class="logout">
        <span>â»</span>
        <span>Logout</span>
      </div>
    </div>
  </aside>

  <!-- ë©”ì¸ : ì±„íŒ… + ì˜¤ë¥¸ìª½ íŒ¨ë„ -->
  <div class="app">
    <div class="content-wrapper">
      <!-- ì±„íŒ… ë ˆì´ì•„ì›ƒ -->
      <section class="chat-layout">
        <header class="chat-header">
          <div>
            <div class="chat-title">ì‚¬íšŒ_ëŒ€í™”1</div>
            <div class="chat-subtitle"></div>
            <div class="chip-row" id="chipRow"></div>
          </div>
        </header>

        <!-- ëŒ€í™” ì˜ì—­ -->
        <div class="chat-window" id="chatWindow">
          <div class="chat-message bot" id="initialMessage">
            <div class="bot-profile">
              <img src="photo.png" alt="AI Profile" />
            </div>
            <div class="chat-bubble">ì•ˆë…•í•˜ì„¸ìš”! ğŸ˜Š  
ë°©ê¸ˆ ì„ íƒí•˜ì‹  ë‚´ìš© ê¸°ì¤€ìœ¼ë¡œ í•™ìŠµ í´ë” êµ¬ì„±ì„ ë„ì™€ë“œë¦´ê²Œìš”.</div>
          </div>
        </div>

        <!-- ì…ë ¥ ì˜ì—­ -->
        <form class="chat-input-bar" id="chatForm">
          <div class="chat-input-top">
            <input
              id="chatInput"
              class="chat-input"
              placeholder="ë©”ì‹œì§€ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”."
              autocomplete="off"
            />
            <button type="submit" class="send-btn">â†‘</button>
          </div>
          <div class="chat-tools-row">
            <button type="button" class="chat-tool-btn">
              <span class="chat-tool-emoji">ğŸ“</span>
              <span>íŒŒì¼ ì¶”ê°€</span>
            </button>
            <button
              type="button"
              class="chat-tool-btn"
              id="openPromptPanelBtn"
            >
              <span class="chat-tool-emoji">ğŸ§­</span>
              <span>ê´€ì  ì„¤ì •</span>
            </button>
            <button type="button" class="chat-tool-btn">
              <span class="chat-tool-emoji">âœï¸</span>
              <span>ì‹¤ì‹œê°„ ê¸€ì“°ê¸°</span>
            </button>
            <button type="button" class="chat-tool-btn">
              <span class="chat-tool-emoji">ğŸ“š</span>
              <span>ì¶œì²˜ ëª©ë¡</span>
            </button>
          </div>
          
        </form>
      </section>

      <!-- ì˜¤ë¥¸ìª½ íŒ¨ë„ : ê³µìœ  í”„ë¡¬í”„íŠ¸ ë§ˆì¼“ -->
      <aside class="prompt-side-panel" id="promptPanel">
        <div class="prompt-panel-header">
          <div class="prompt-panel-title">ê´€ì  ì„¤ì •</div>
          <button class="prompt-panel-close" id="closePromptPanelBtn">X</button>
        </div>

        <div class="prompt-panel-tabs">
          <div class="prompt-tabs">
            <button class="prompt-tab">ê´€ì  í”„ë¡¬í”„íŠ¸</button>
            <button class="prompt-tab active">
              ì¥ë°”êµ¬ë‹ˆ
              <span class="prompt-tab-badge">12</span>
            </button>
          </div>
        </div>

        <div class="prompt-search-bar">
          <span>ğŸ”</span>
          <input type="text" placeholder="Search" />
        </div>

        <div class="prompt-list-vertical">
          <div class="prompt-vertical-item">
            <div class="prompt-vertical-thumb"></div>
            <div class="prompt-vertical-text">
              <div class="prompt-vertical-title">ì‚¬íšŒí•™ìì˜ ê´€ì </div>
              <div class="prompt-vertical-subtitle">ê´€ì  í”„ë¡¬í”„íŠ¸</div>
            </div>
            <button class="prompt-add-btn">+</button>
          </div>

          <div class="prompt-vertical-item">
            <div class="prompt-vertical-thumb"></div>
            <div class="prompt-vertical-text">
              <div class="prompt-vertical-title">ë°ì´í„° ë¶„ì„ê°€</div>
              <div class="prompt-vertical-subtitle">ê´€ì  í”„ë¡¬í”„íŠ¸</div>
            </div>
            <button class="prompt-add-btn">+</button>
          </div>

          <div class="prompt-vertical-item">
            <div class="prompt-vertical-thumb"></div>
            <div class="prompt-vertical-text">
              <div class="prompt-vertical-title">ê¸°ì—… ê²½ì˜ì§„ì˜ ê´€ì </div>
              <div class="prompt-vertical-subtitle">ê´€ì  í”„ë¡¬í”„íŠ¸</div>
            </div>
            <button class="prompt-add-btn">+</button>
          </div>

          <div class="prompt-vertical-item">
            <div class="prompt-vertical-thumb"></div>
            <div class="prompt-vertical-text">
              <div class="prompt-vertical-title">ë¹„íŒì  ë¯¸ë””ì–´ ê´€ì </div>
              <div class="prompt-vertical-subtitle">ê´€ì  í”„ë¡¬í”„íŠ¸</div>
            </div>
            <button class="prompt-add-btn">+</button>
          </div>

          <div class="prompt-vertical-item">
            <div class="prompt-vertical-thumb"></div>
            <div class="prompt-vertical-text">
              <div class="prompt-vertical-title">ì² í•™ì ë‹ˆì²´ì˜ ì„¸ê³„ê´€</div>
              <div class="prompt-vertical-subtitle">ê´€ì  í”„ë¡¬í”„íŠ¸</div>
            </div>
            <button class="prompt-add-btn">+</button>
          </div>

          <div class="prompt-vertical-item">
            <div class="prompt-vertical-thumb"></div>
            <div class="prompt-vertical-text">
              <div class="prompt-vertical-title">ì²­ì†Œë…„ ì†Œë¹„ì ê´€ì </div>
              <div class="prompt-vertical-subtitle">ê´€ì  í”„ë¡¬í”„íŠ¸</div>
            </div>
            <button class="prompt-add-btn">+</button>
          </div>

          <div class="prompt-vertical-item">
            <div class="prompt-vertical-thumb"></div>
            <div class="prompt-vertical-text">
              <div class="prompt-vertical-title">í™˜ê²½ìœ¤ë¦¬ ê´€ì </div>
              <div class="prompt-vertical-subtitle">ê´€ì  í”„ë¡¬í”„íŠ¸</div>
            </div>
            <button class="prompt-add-btn">+</button>
          </div>
        </div>
      </aside>
    </div>
  </div>
</div>

<script>
    // ìº”ë²„ìŠ¤ ìŠ¤ì¼€ì¼
    const BASE_WIDTH = 1440;
    const BASE_HEIGHT = 900;
  
    function updateScale() {
      const sx = window.innerWidth / BASE_WIDTH;
      const sy = window.innerHeight / BASE_HEIGHT;
      const scale = Math.min(sx, sy);
      const root = document.getElementById("app-root");
      root.style.transform = `scale(${scale}) translate(-50%, -50%)`;
    }
    window.addEventListener("resize", updateScale);
    updateScale();
  
    // ì¹© ì„¸íŒ…
    const subject = "í•œêµ­ì§€ë¦¬";
    const purpose = "ì„¸ë¶€íŠ¹ê¸°ì‚¬í•­";
    const promptText = "ì„¤ëª…í˜• ê¸€ì“°ê¸°";
    const chipRow = document.getElementById("chipRow");
  
    function addChip(label, value, closable = false) {
      if (!value) return;
      const chip = document.createElement("div");
      chip.className = "chip";
  
      const labelSpan = document.createElement("span");
      labelSpan.className = "chip-label";
      labelSpan.textContent = label;
  
      const valueSpan = document.createElement("span");
      valueSpan.textContent = " " + value;
  
      chip.appendChild(labelSpan);
      chip.appendChild(valueSpan);
  
      if (closable) {
        const closeBtn = document.createElement("button");
        closeBtn.type = "button";
        closeBtn.className = "chip-close";
        closeBtn.textContent = "Ã—";
  
        closeBtn.addEventListener("click", () => {
          labelSpan.remove();
          closeBtn.remove();
          chip.classList.add("chip-add");
          valueSpan.textContent = "í”„ë¡¬í”„íŠ¸ ì¶”ê°€í•˜ê¸°";
          chip.addEventListener(
            "click",
            () => {
              console.log("í”„ë¡¬í”„íŠ¸ ì¶”ê°€í•˜ê¸° í´ë¦­");
            },
            { once: true }
          );
        });
  
        chip.appendChild(closeBtn);
      }
  
      chipRow.appendChild(chip);
    }
  
    addChip("ê³¼ëª©", subject);
    addChip("ëª©ì ", purpose);
    addChip("í”„ë¡¬í”„íŠ¸", promptText, true);
  
    // ë”ë¯¸ ì±„íŒ…
    const chatForm = document.getElementById("chatForm");
    const chatInput = document.getElementById("chatInput");
    const chatWindow = document.getElementById("chatWindow");
    const initialMessage = document.getElementById("initialMessage");
    let firstInteractionDone = false;
  
    function appendMessage(text, role = "user") {
      const msg = document.createElement("div");
      msg.className = `chat-message ${role}`;
  
      if (role === "bot") {
        const profile = document.createElement("div");
        profile.className = "bot-profile";
        const img = document.createElement("img");
        img.src = "photo.png";
        img.alt = "AI Profile";
        profile.appendChild(img);
        msg.appendChild(profile);
      }
  
      const bubble = document.createElement("div");
      bubble.className = "chat-bubble";
      if (role === "bot") {
        bubble.style.background = "transparent";
        bubble.style.padding = "0";
        bubble.style.borderRadius = "0";
      }
      bubble.textContent = text;
      msg.appendChild(bubble);
      chatWindow.appendChild(msg);
      chatWindow.scrollTop = chatWindow.scrollHeight;
    }
  
    chatForm.addEventListener("submit", (e) => {
      e.preventDefault();
      const value = chatInput.value.trim();
      if (!value) return;
  
      if (!firstInteractionDone && initialMessage) {
        initialMessage.remove();
        firstInteractionDone = true;
      }
  
      appendMessage(value, "user");
      chatInput.value = "";
  
      setTimeout(() => {
        appendMessage(
  `[ì„¤ê³„ì•ˆ] ë‹¤ìŒì€ í•´ë‹¹ ì£¼ì œë¥¼ ë…¼ìˆ í˜• ê¸€ë¡œ ì „ê°œí•˜ê¸° ìœ„í•œ ê¸°ë³¸ êµ¬ì¡° ì„¤ê³„ì•ˆì…ë‹ˆë‹¤.
  
  ì„œë¡ 
  AI ì¶”ì²œ ì•Œê³ ë¦¬ì¦˜ì´ ë‹¤ì–‘í•œ í”Œë«í¼ì—ì„œ ìš°ë¦¬ì˜ ì„ íƒ ê³¼ì •ì— ê¹Šì´ ê°œì…í•˜ê³  ìˆë‹¤ëŠ” ì ì„ ì œì‹œí•©ë‹ˆë‹¤.
  â€˜ì„ íƒì„ ë•ëŠ” ë„êµ¬ì¸ê°€, ì„ íƒì„ ì œí•œí•˜ëŠ” í‹€ì¸ê°€â€™ë¼ëŠ” í•µì‹¬ ë¬¸ì œë¥¼ ë˜ì ¸ ê¸€ì˜ ë…¼ì ì„ ì œì‹œí•©ë‹ˆë‹¤.
  ë³¸ë¡  1 â€“ ì„ íƒì„ ë” ë˜‘ë˜‘í•˜ê²Œ ë§Œë“ ë‹¤ëŠ” ê´€ì 
  ë°©ëŒ€í•œ ë°ì´í„° ë¶„ì„ì„ ê¸°ë°˜ìœ¼ë¡œ ê°œì¸ ë§ì¶¤ ì¶”ì²œ ì œê³µ
  ì •ë³´ íƒìƒ‰ ë¹„ìš© ê°ì†Œ(ì‹œê°„Â·ë…¸ë ¥ ì ˆì•½)
  ê³¼ê±° ì„ íƒ íŒ¨í„´ì„ í•™ìŠµí•˜ì—¬ ë” ì •êµí•œ íŒë‹¨ ë³´ì¡°
  ì˜ˆ: ìŒì•… ì¶”ì²œ ì•Œê³ ë¦¬ì¦˜ì´ ì·¨í–¥ ê¸°ë°˜ìœ¼ë¡œ ìƒˆë¡œìš´ ì•„í‹°ìŠ¤íŠ¸ë¥¼ ìë™ ë°œêµ´í•´ì£¼ëŠ” ì‚¬ë¡€
  ë³¸ë¡  2 â€“ ì„ íƒì„ ë” ì¢ê²Œ ë§Œë“ ë‹¤ëŠ” ê´€ì 
  ì•Œê³ ë¦¬ì¦˜ì´ ë³´ì—¬ì£¼ëŠ” ì •ë³´ì— ì§€ë‚˜ì¹˜ê²Œ ì˜ì¡´í•  ê°€ëŠ¥ì„±
  í•„í„° ë²„ë¸” ê°•í™” â†’ ë‹¤ì–‘í•œ ê´€ì ê³¼ ì •ë³´ ì ‘ê·¼ì´ ì–´ë ¤ì›Œì§
  íŠ¹ì • í”Œë«í¼ì´ ë…¸ì¶œ ìš°ì„ ìˆœìœ„ë¥¼ í†µì œí•¨ìœ¼ë¡œì¨ ì„ íƒê¶Œì´ â€˜ë³´ì´ì§€ ì•Šê²Œâ€™ ì œí•œë  ìœ„í—˜
  ì˜ˆ: SNS ì•Œê³ ë¦¬ì¦˜ì´ ë¹„ìŠ·í•œ ìœ í˜•ì˜ ì½˜í…ì¸ ë§Œ ë°˜ë³µì ìœ¼ë¡œ ë…¸ì¶œí•˜ëŠ” ë¬¸ì œ
  ê²°ë¡ 
  ë‘ ê´€ì ì˜ ì¥ë‹¨ì ì„ ìš”ì•½í•˜ê³ ,
  ì•Œê³ ë¦¬ì¦˜ì„ ì´í•´í•˜ê³  ëŠ¥ë™ì ìœ¼ë¡œ í™œìš©í•˜ëŠ” ëŠ¥ë ¥ì´ í•„ìš”í•˜ë‹¤ëŠ” ì ì„ ê°•ì¡°í•˜ë©° ê¸€ì„ ë§ˆë¬´ë¦¬í•©ë‹ˆë‹¤.
  
  í•„ìš”í•˜ë‹¤ë©´ ì´ˆì•ˆ ì‘ì„±, ì‚¬ë¡€ í™•ì¥, ëŒ€ì•ˆ ë…¼ì§€ ì œì‹œ ë“±ë„ ì´ì–´ì„œ ì§€ì›í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤`,
          "bot"
        );
      }, 500);
    });
  
    // ì˜¤ë¥¸ìª½ íŒ¨ë„ ì—´ê¸° / ë‹«ê¸°
    const promptPanel = document.getElementById("promptPanel");
    const openPromptPanelBtn = document.getElementById("openPromptPanelBtn");
    const closePromptPanelBtn = document.getElementById("closePromptPanelBtn");
  
    function openPromptPanel() {
      promptPanel.classList.add("is-open");
    }
    function closePromptPanel() {
      promptPanel.classList.remove("is-open");
    }
    openPromptPanelBtn.addEventListener("click", openPromptPanel);
    closePromptPanelBtn.addEventListener("click", closePromptPanel);
  
    // ===== ì¥ë°”êµ¬ë‹ˆ í•­ëª©ì„ ì‚¬ì´ë“œë°” ìŠ¬ë¡¯ì— ì±„ìš°ê¸° (í´ë¦­ + ë“œë˜ê·¸ ê³µí†µ) =====
    const basketSlots = document.querySelectorAll(".basket-slot");
    const usedTitles = new Set();
    const sidebarBasket = document.getElementById("sidebarBasket");
  
    function fillSlot(slot, title) {
      if (!slot || slot.classList.contains("filled")) return;
      if (usedTitles.has(title)) return;
  
      usedTitles.add(title);
      slot.classList.add("filled");
      slot.innerHTML = "";
  
      const dot = document.createElement("span");
      dot.className = "basket-dot";
  
      const text = document.createElement("span");
      text.textContent = title;
  
      slot.appendChild(dot);
      slot.appendChild(text);
    }
  
    // ì²« ë²ˆì§¸ ë¹ˆ ìŠ¬ë¡¯ ì±„ìš°ê¸° ( + ë²„íŠ¼ìš© )
    function addToSidebarBasket(title) {
      if (usedTitles.has(title)) return;
  
      for (const slot of basketSlots) {
        if (!slot.classList.contains("filled")) {
          fillSlot(slot, title);
          break;
        }
      }
    }
  
    // + ë²„íŠ¼ í´ë¦­ ì‹œ
    document.querySelectorAll(".prompt-vertical-item").forEach((item) => {
      const btn = item.querySelector(".prompt-add-btn");
      const titleEl = item.querySelector(".prompt-vertical-title");
  
      if (!btn || !titleEl) return;
  
      btn.addEventListener("click", () => {
        const title = titleEl.textContent.trim();
        addToSidebarBasket(title);
        btn.textContent = "âœ“";
        btn.disabled = true;
      });
    });
  
    // ===== ë“œë˜ê·¸ ì•¤ ë“œë¡­ ë¡œì§ =====
    let draggedItem = null;
  
    // ì¹´ë“œë“¤ì„ ë“œë˜ê·¸ ê°€ëŠ¥í•˜ê²Œ
    document.querySelectorAll(".prompt-vertical-item").forEach((item) => {
      const titleEl = item.querySelector(".prompt-vertical-title");
      if (!titleEl) return;
  
      item.setAttribute("draggable", "true");
  
      item.addEventListener("dragstart", (e) => {
        draggedItem = item;
        item.classList.add("dragging");
        const title = titleEl.textContent.trim();
        e.dataTransfer.effectAllowed = "copy";
        e.dataTransfer.setData("text/plain", title);
        sidebarBasket.classList.add("drag-target");
      });
  
      item.addEventListener("dragend", () => {
        draggedItem = null;
        item.classList.remove("dragging");
        sidebarBasket.classList.remove("drag-target");
      });
    });
  
    // ë“œë íƒ€ê²Ÿ: sidebarBasket ì „ì²´
    sidebarBasket.addEventListener("dragover", (e) => {
      e.preventDefault(); // drop í—ˆìš©
      e.dataTransfer.dropEffect = "copy";
    });
  
    sidebarBasket.addEventListener("drop", (e) => {
      e.preventDefault();
      sidebarBasket.classList.remove("drag-target");
  
      const title = e.dataTransfer.getData("text/plain");
      if (!title) return;
  
      // ë§ˆìš°ìŠ¤ ìœ„ì¹˜ì™€ ê²¹ì¹˜ëŠ” ìŠ¬ë¡¯ ì°¾ê¸°
      const x = e.clientX;
      const y = e.clientY;
      let targetSlot = null;
  
      basketSlots.forEach((slot) => {
        const rect = slot.getBoundingClientRect();
        if (
          x >= rect.left &&
          x <= rect.right &&
          y >= rect.top &&
          y <= rect.bottom
        ) {
          targetSlot = slot;
        }
      });
  
      // ê²¹ì¹˜ëŠ” ìŠ¬ë¡¯ì´ ì—†ìœ¼ë©´ ì²« ë²ˆì§¸ ë¹ˆ ìŠ¬ë¡¯ ì‚¬ìš©
      if (!targetSlot) {
        basketSlots.forEach((slot) => {
          if (!targetSlot && !slot.classList.contains("filled")) {
            targetSlot = slot;
          }
        });
      }
  
      if (!targetSlot) return;
  
      fillSlot(targetSlot, title);
  
      // ë“œë˜ê·¸í•´ ì˜¨ ì¹´ë“œì˜ ë²„íŠ¼ë„ ì²´í¬ ì²˜ë¦¬
      if (draggedItem) {
        const btn = draggedItem.querySelector(".prompt-add-btn");
        if (btn && !btn.disabled) {
          btn.textContent = "âœ“";
          btn.disabled = true;
        }
      }
    });
    const toolButtons = document.querySelectorAll(".chat-tool-btn");
const perspectiveBtn = document.getElementById("openPromptPanelBtn");

// íŒ¨ë„ ì—´ë¦´ ë•Œ â†’ ë‚˜ë¨¸ì§€ ë²„íŠ¼ íë¦¬ê²Œ
function dimOtherToolButtons() {
  toolButtons.forEach((btn) => {
    if (btn !== perspectiveBtn) {
      btn.style.opacity = "0.3";
      btn.style.pointerEvents = "none";  // í´ë¦­ë„ ë§‰ê¸° ì›í•˜ë©´ ìœ ì§€, ì•„ë‹ˆë©´ ì‚­ì œ
    }
  });
}

// íŒ¨ë„ ë‹«í ë•Œ â†’ ì›ë˜ëŒ€ë¡œ
function restoreToolButtons() {
  toolButtons.forEach((btn) => {
    btn.style.opacity = "1";
    btn.style.pointerEvents = "auto";
  });
}

function openPromptPanel() {
  promptPanel.classList.add("is-open");
  dimOtherToolButtons();   // â† ì´ê±° ì¶”ê°€ë¨!
}

function closePromptPanel() {
  promptPanel.classList.remove("is-open");
  restoreToolButtons();   // â† ì´ê±° ì¶”ê°€ë¨!
}

  </script>
  
  

</body>
</html>
